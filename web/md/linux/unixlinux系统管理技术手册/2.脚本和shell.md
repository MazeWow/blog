# 小论
- 运行效率不应该成为脚本编写的关注重点，清晰可读性才是重点
- shell脚步简单易用，linux标配，但是高端复杂的脚本的编写，使用Perl和Python会更加给力,但是缺点在于，建立它们的环境要麻烦些

# shell基础
- 设置编辑模式
    ```
    ➜  ~ set -o vi
    ```

## 管道和重定向
- 每个进程都有三个流,`stdin` `stdout` `stderr`,进程不在意这三个流来自哪里，又通向哪里，它们可能链接到一个终端，一个文件，一条网络链接，或者另一个进程的流
- 每个流的命名叫做`文件描述符`，它们依次是0,1,2
- 三个流的默认指向都是终端
- `>` `<` `>>` 是重定向，能改变流的指向
    ```
    ➜  ~ echo "this is a test message" > /tmp/mymessage /*重定向输出到文件*/
    ➜  ~ mail -s "Mail test" cky < /tmp/mymessage /*使用文件里内容发送邮件*/
    ```
- 将错误输出重定向
    ```
    ➜  ~ find / -name core /*没有重定向，stdout与stderr都输出在屏幕*/
    find: ‘/boot/efi’: 权限不够
    /dev/core
    find: ‘/sys/kernel/debug’: 权限不够
    find: ‘/var/spool/rsyslog’: 权限不够

    ➜  ~ find / -name core > /tmp/test_output /*只将stdout重定向到文件,stderr还是输出到了屏幕*/
    find: ‘/boot/efi’: 权限不够
    find: ‘/sys/kernel/debug’: 权限不够

    ➜  ~ find / -name core >& /tmp/test_output /*将stdout与stderr都输出到文件*/
    ➜  ~ cat /tmp/test_output
    find: ‘/boot/efi’: 权限不够
    /dev/core
    find: ‘/sys/kernel/debug’: 权限不够
    find: ‘/var/spool/rsyslog’: 权限不够
    find: ‘/var/spool/exim4’: 权限不够
    find: ‘/var/spool/cups’: 权限不够
    find: ‘/var/spool/cron/crontabs’: 权限不够

    ➜  ~ find / -name core 2> /tmp/null       /*将stderr输出到黑洞，将stdout输出到屏幕*/
    /dev/core
    /usr/share/atom/resources/app/apm/node_modules/git-utils/deps/libgit2/tests/core
    /usr/src/linux-headers-4.10.0-20-generic/include/config/serial/core
    /usr/src/linux-headers-4.10.0-20-generic/include/config/mlxsw/core
    /usr/src/linux-headers-4.10.0-20-generic/include/config/mlx5/core
    /usr/src/linux-headers-4.10.0-20-generic/include/config/core
    ```

- 将一条命令的stdout链接到另一条命令的stdin
    ```
    ➜  ~ ps -ef | grep ssh                
    cky       1324  1245  0 4月27 ?       00:00:00 /usr/bin/ssh-agent /usr/bin/sogou-session /usr/bin/im-launch /usr/lib/gnome-session/run-systemd-session ubuntu-session.target
    cky       1454  1183  0 4月27 ?       00:00:00 /usr/bin/gnome-keyring-daemon --start --components ssh
    cky      32116  3823  0 18:22 pts/0    00:00:00 grep --color=auto --exclude-dir=.bzr --exclude-dir=CVS --exclude-dir=.git --exclude-dir=.hg --exclude-dir=.svn ssh
    ➜  ~ cut -d: -f7 < /etc/passwd|sort -u
    /bin/bash
    /bin/false
    /bin/sync
    /usr/bin/zsh
    /usr/sbin/nologin
    ```

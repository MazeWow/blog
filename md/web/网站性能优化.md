# web访问流程

用户输入网站域名

通过DNS解析,找到目标服务器IP

向ip地址发起请求,数据经互联网达到目标服务器

目标服务器收到请求数据，进行处理（执行程序、访问数据库、文件服务器等）

处理完成，将响应数据又经互联网返回给用户浏览器

浏览器得到结果进行计算渲染显示给用户

# DNS 解析优化

从这个过程我们可以看到，优化的地方主要是减少DNS解析次数，而如果用户浏览器设置了缓存，则再第二次访问相同域名的时候就不会去请求DNS服务器，直接用缓存中的IP地址发出请求。

因此这个过程主要取决于浏览器的设置。现在主流的浏览器默认设置了DNS的预取功能（DNS Prefetch），当然你也可以主动告知浏览器我的网站需要做DNS预取：

`<meta http-equiv="x-dns-prefetch-control" content="on" />`

# 数据传输的优化

CDN 部署

增加网站服务器上传宽带

# 处理上的优化

##缓存

根据需要使用本地缓存或分布式缓存

##使用异步操作

这种方式不仅可以提高性能，也提高了系统的扩展性

使用同步请求的方式，在高并发的情况下，会对数据库造成很大的压力，也会让用户感觉响应时间过长。

异步请求方式，则可以快速的对用户做出响应，而具体的数据库操作请求，则通过消息队列服务器发送给数据库服务器，做具体的插入操作。插入操作的结果则已其他方式通知客户端。

例如一般在订票系统当中，出票行为就是异步完成，最终的出票结果会以邮件或其他方式告知用户

##代码优化

这里就不在详细描述，另一篇随笔《怎样编写高质量的java代码》对代码质量和风格做过大致的介绍，有兴趣可以看一下。

##存储优化

大型网站中海量的数据读写对磁盘造成很大压力，系统最大的瓶颈还是在磁盘的读写。可以考虑使用磁盘阵列、分布式储存来改善存储的性能。

性能的指标和测试

## 响应时间

就是用户发出请求到收到响应数据的时间

## 并发量

同时访问系统的请求的最高值

## 吞吐量

单位时间内访问系统的总数



# 渲染优化

浏览器解析响应数据；浏览器创建DOM树；浏览器下载CSS样式，并应用到DOM树，进行渲染；浏览器下载JS文件，开始解析执行；显示给用户。

首先我们可以尽量控制页面大小，使得浏览器解析的时间更短；

并且将多个CSS文件、JS文件文件合并压缩减少文件下载的次数和大小；

另外注意将CSS放在页面前面，JS访问页面后面，这样便于页面首先能渲染出来，再执行js脚本，对于用户来说有更好的体验。

最后我还可以设置浏览器缓存，下次访问时从缓存读取内容，减少http请求。

`<meta http-equiv="Cache-Control" content="max-age=5" />`

该代码说明了浏览器启用了缓存并在5秒内不会再次访问服务器。注意缓存的设置需要结合你的业务特性来适当配
